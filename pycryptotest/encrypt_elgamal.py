from Crypto import Random
from Crypto.Random import random
from Crypto.PublicKey import ElGamal
from Crypto.Util.number import GCD

import sys

print(sys.maxsize)

message = b"Hello!"

# aa = (message*pow(128961657010348571539265495281510611621030065721820355491190421605405544437433130481049658566752265633130354715167110119485118509331178101689361185825166600716400610975360143557437793065708275582617616343374673956890180713999236698414347229956544627212945402924913719723828450839690196585079832049020428092003, 100836833719315657077023107479670893219306619587385791183428512322716000054463000712589450566400258323954839255665067167413132626204226017737707529496496604187538494389598953413376534325516899506339052246787759872358963372271624730951059847207370838267787380349403680212682337263466438700552662530255861840223, 156696798063143980128248220760731616306011396815387108010879180107303754570032199729842206751431483722564550981418926601557567245339693512120831686544962553412142347854914615341395646370379720690971229405336679215073246593456756050173747781771633286883631390370536577208962362745028983872798497238467792989723)) % 156696798063143980128248220760731616306011396815387108010879180107303754570032199729842206751431483722564550981418926601557567245339693512120831686544962553412142347854914615341395646370379720690971229405336679215073246593456756050173747781771633286883631390370536577208962362745028983872798497238467792989723
# print(aa)
key = ElGamal.generate(1024, Random.new().read)
while 1:
    k = random.StrongRandom().randint(1, key.p - 1)
    print("k")
    print(k)
    print("key.p")
    print(key.p)
    if GCD(k, key.p - 1) == 1:
        break

h = key.encrypt(message, k)
d = key.decrypt(h)
print(h)
print(d)